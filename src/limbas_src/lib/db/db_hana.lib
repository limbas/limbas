<?php
/*
 * Copyright notice
 * (c) 1998-2019 Limbas GmbH(support@limbas.org)
 * All rights reserved
 * This script is part of the LIMBAS project. The LIMBAS project is free software; you can redistribute it and/or modify it on 2 Ways:
 * Under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.
 * Or
 * In a Propritary Software Licence http://limbas.org
 * The GNU General Public License can be found at http://www.gnu.org/copyleft/gpl.html.
 * A copy is found in the textfile GPL.txt and important notices to the license from the author is found in LICENSE.txt distributed with these scripts.
 * This script is distributed WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 * This copyright notice MUST APPEAR in all copies of the script!
 * Version 3.6
 */


use Limbas\lib\db\functions\Dbf;
use Limbas\lib\general\Log\Log;

require_once __DIR__ .'/constants/hana.php';

#require_once('db_odbc.lib');




# odbc connect:
/**
 *
 * @param $host
 * @param $database
 * @param $dbuser
 * @param $dbpass
 * @param $dbdriver
 * @param $port
 * @return null
 *
 * @deprecated Use Dbf::connect instead.
 */
function dbq_0($host,$database,$dbuser,$dbpass,$dbdriver=null,$port=null){
    Log::deprecated('Method ' . __METHOD__ . ' is deprecated. Use Dbf::connect instead.');
    return Dbf::connect($host,$database,$dbuser,$dbpass,$dbdriver,intval($port));
}


/**
 * convert stamp for db
 * @param number $p
 * @return string
 *
 * @deprecated Use Dbf::convertToDbTimestamp instead.
 */
function dbf_1($p,$t=0){
    Log::deprecated('Method ' . __METHOD__ . ' is deprecated. Use Dbf::convertToDbTimestamp instead.');
    return Dbf::convertToDbTimestamp($p,$t);
}

/**
 * parse blob
 *
 * @param string $p
 * @return string
 *
 * @deprecated Use Dbf::parseBlob instead.
 */
function dbf_6($p){
    Log::deprecated('Method ' . __METHOD__ . ' is deprecated. Use Dbf::parseBlob instead.');
    return Dbf::parseBlob($p ?? '');
}

/**
 * parse string
 *
 * @param string $p
 * @return string
 *
 * @deprecated Use Dbf::parseString instead.
 */
function dbf_7($p){
    Log::deprecated('Method ' . __METHOD__ . ' is deprecated. Use Dbf::parseBlob instead.');
    return Dbf::parseString($p ?? '');
}

/**
 * get sequence
 *
 * @param string $p=name
 *
 * @deprecated Use Dbf::getSequence instead.
 */
function dbf_8($p){
    Log::deprecated('Method ' . __METHOD__ . ' is deprecated. Use Dbf::getSequence instead.');
    return Dbf::getSequence($p);
}

/**
 * case sensitive
 *
 * @param string $p
 * @return string
 *
 * @deprecated Use Dbf::handleCaseSensitive instead.
 */
function dbf_4($p){
    Log::deprecated('Method ' . __METHOD__ . ' is deprecated. Use Dbf::handleCaseSensitive instead.');
    return Dbf::handleCaseSensitive($p);
}


/**
 * timediff
 *
 * @param array $p
 * @return string
 *
 * @deprecated Use Dbf::sqlTimeDiff instead.
 */
function dbf_9($p){
    Log::deprecated('Method ' . __METHOD__ . ' is deprecated. Use Dbf::sqlTimeDiff instead.');
    return Dbf::sqlTimeDiff($p[0],$p[1]);
}

/**
 * datediff
 *
 * @param array $p
 * @return string
 *
 * @deprecated Use Dbf::sqlDateDiff instead.
 */
function dbf_10($p){
    Log::deprecated('Method ' . __METHOD__ . ' is deprecated. Use Dbf::sqlDateDiff instead.');
    return Dbf::sqlDateDiff($p[0],$p[1]);
}



// TODO: decide if this should be included in DbFunction class
/**
 * get fieldtype extension
 *
 * @param string
 * @return boolean
 * @deprecated
 */
function dbf_11($ftype){
    trigger_error("The function dbf_11 is deprecated, its results are not updated anymore and are likely inaccurate.");
    $hasext = array('NVARCHAR','REAL','DECIMAL','ASCII','BYTE','SERIAL');

    return in_array(strtoupper($ftype),$hasext);
}


?>
